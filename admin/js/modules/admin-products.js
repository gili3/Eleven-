// admin-products.js
function loadAdminProducts(){const _0x40498d=a0_0x31a6c7;try{const _0x2748ac=document[_0x40498d(0x4d5,'%Sp#')](_0x40498d(0x544,'$l%E'));if(!_0x2748ac)return;_0x2748ac[_0x40498d(0x481,'T8@N')]=_0x40498d(0x4dc,'eLE@');const _0x202f6f=window[_0x40498d(0x39b,'y6kQ')][_0x40498d(0x4bd,'v$!6')](adminDb,_0x40498d(0x5c1,'(AWv')),_0x5826e9=window[_0x40498d(0x58b,'ovTd')][_0x40498d(0x547,'!$!F')](_0x202f6f,window[_0x40498d(0x3fe,'9dA7')][_0x40498d(0x347,'U^FL')](_0x40498d(0x351,'(AWv'),_0x40498d(0x217,'vK0F'))),_0x10f293=await window[_0x40498d(0x5da,'vm1N')][_0x40498d(0x289,'U^FL')](_0x5826e9);if(_0x10f293[_0x40498d(0x51e,'a1a%')]){_0x2748ac[_0x40498d(0x5b0,'se(l')]=_0x40498d(0x47f,'se(l');return;}let _0x593c0c='';_0x10f293[_0x40498d(0x4f9,'$l%E')](_0x94abf2=>{const _0x2e27f2=_0x40498d,_0xde84a6=_0x94abf2[_0x2e27f2(0x365,'$l%E')](),_0x2785c1=_0x94abf2['id'],_0x1eb6e4=_0xde84a6[_0x2e27f2(0x270,'Vobq')]!==![];_0x593c0c+=_0x2e27f2(0x240,'a1a%')+_0x2785c1+_0x2e27f2(0x253,'9dA7')+(_0xde84a6[_0x2e27f2(0x28b,'j1&b')]||'')+_0x2e27f2(0x357,'T8@N')+_0xde84a6[_0x2e27f2(0x22f,'se(l')]+_0x2e27f2(0x40f,'AoJo')+(_0xde84a6[_0x2e27f2(0x20d,'#&bj')]||_0x2e27f2(0x328,'$l%E'))+_0x2e27f2(0x534,'3%o!')+formatNumber(_0xde84a6[_0x2e27f2(0x35a,'uvCh')]||0x0)+'\x20'+siteCurrency+_0x2e27f2(0x28f,'Vobq')+(_0x1eb6e4?_0x2e27f2(0x3ce,'ovTd'):_0x2e27f2(0x555,'$l%E'))+_0x2e27f2(0x572,'QBp@')+(_0x1eb6e4?_0x2e27f2(0x420,'se(l'):_0x2e27f2(0x359,'zKbH'))+_0x2e27f2(0x345,'*gvl')+_0x2785c1+_0x2e27f2(0x1e7,'Vobq')+_0x2785c1+_0x2e27f2(0x4df,'wQB5');}),_0x2748ac[_0x40498d(0x474,'LoIP')]=_0x593c0c;}catch(_0x27b0d2){console[_0x40498d(0x32b,'9dA7')](_0x40498d(0x5e9,'sFPI'),_0x27b0d2);}}

function editProduct(_0x34b55e){const _0x3dce9d=a0_0x31a6c7;currentEditingProductId=_0x34b55e,document[_0x3dce9d(0x522,'v$!6')](_0x3dce9d(0x2f7,'1@1K'))[_0x3dce9d(0x3fc,'3%o!')]=_0x3dce9d(0x53b,'*gvl');try{const _0x48c9ff=window[_0x3dce9d(0x622,'7Ggg')][_0x3dce9d(0x5d3,'Vobq')](adminDb,_0x3dce9d(0x2c1,'v$!6'),_0x34b55e),_0x31ecd6=await window[_0x3dce9d(0x35d,'sFPI')][_0x3dce9d(0x3a2,'vYTh')](_0x48c9ff);if(_0x31ecd6[_0x3dce9d(0x60c,'a1a%')]()){const _0x39e662=_0x31ecd6[_0x3dce9d(0x48c,'sFPI')]();document[_0x3dce9d(0x5d6,'R9v&')](_0x3dce9d(0x587,'eLE@'))[_0x3dce9d(0x4d1,'7Ggg')]=_0x39e662[_0x3dce9d(0x4c3,'QBp@')]||'',document[_0x3dce9d(0x502,'vYTh')](_0x3dce9d(0x489,'vm1N'))[_0x3dce9d(0x4d7,'(AWv')]=_0x39e662[_0x3dce9d(0x370,'tN$n')]||0x0,document[_0x3dce9d(0x493,'vK0F')](_0x3dce9d(0x61d,'*gvl'))[_0x3dce9d(0x5c5,'U^FL')]=_0x39e662[_0x3dce9d(0x27a,'XvgR')]||'',document[_0x3dce9d(0x3ed,'a1a%')](_0x3dce9d(0x2eb,'!]!K'))[_0x3dce9d(0x575,'LoIP')]=_0x39e662[_0x3dce9d(0x25a,'1@1K')]||0x0,document[_0x3dce9d(0x3c3,'LoIP')](_0x3dce9d(0x228,'WK1M'))[_0x3dce9d(0x1f4,'ITel')]=_0x39e662[_0x3dce9d(0x42f,'%Sp#')]||'',document[_0x3dce9d(0x538,'XvgR')](_0x3dce9d(0x5f2,'H9II'))[_0x3dce9d(0x5b5,'WV#M')]=_0x39e662[_0x3dce9d(0x5c9,'vL9(')]||'',document[_0x3dce9d(0x5f4,'LXbE')](_0x3dce9d(0x374,'r%#7'))[_0x3dce9d(0x2c4,'se(l')]=_0x39e662[_0x3dce9d(0x381,'r%#7')]||![],document[_0x3dce9d(0x3ed,'a1a%')](_0x3dce9d(0x478,'3QCz'))[_0x3dce9d(0x5ef,'1d#c')]=_0x39e662[_0x3dce9d(0x612,'%Sp#')]||![],document[_0x3dce9d(0x4d3,'zKbH')](_0x3dce9d(0x3eb,'y6kQ'))[_0x3dce9d(0x2f9,'mo(z')]=_0x39e662[_0x3dce9d(0x227,'QBp@')]||![],document[_0x3dce9d(0x524,'eLE@')](_0x3dce9d(0x5c4,'wQB5'))[_0x3dce9d(0x2e2,'wQB5')]=_0x39e662[_0x3dce9d(0x54b,'wQB5')]!==![];if(_0x39e662[_0x3dce9d(0x214,'kTjX')]){const _0xf45358=document[_0x3dce9d(0x3c4,'kTjX')](_0x3dce9d(0x41b,'zKbH')),_0x247f5e=document[_0x3dce9d(0x53f,'Ba0E')](_0x3dce9d(0x50c,'R9v&'));_0xf45358&&_0x247f5e&&(_0xf45358[_0x3dce9d(0x514,'vWnO')]=_0x39e662[_0x3dce9d(0x4ac,'Ba0E')],_0x247f5e[_0x3dce9d(0x500,'%Sp#')][_0x3dce9d(0x366,'!]!K')]=_0x3dce9d(0x59e,'vK0F'),document[_0x3dce9d(0x426,'se(l')](_0x3dce9d(0x5ba,'1@1K'))[_0x3dce9d(0x2ec,'U^FL')][_0x3dce9d(0x33b,'eLE@')]=_0x3dce9d(0x49c,'!]!K'),document[_0x3dce9d(0x535,'3%o!')](_0x3dce9d(0x3b3,'vYTh'))[_0x3dce9d(0x50f,'vm1N')][_0x3dce9d(0x5fa,'tN$n')](_0x3dce9d(0x61c,'ovTd')));}}document[_0x3dce9d(0x484,'9dA7')](_0x3dce9d(0x47a,'U^FL'))[_0x3dce9d(0x467,'3%o!')][_0x3dce9d(0x55f,'T8@N')](_0x3dce9d(0x5c2,'se(l'));}catch(_0x19442f){console[_0x3dce9d(0x1fd,'WV#M')](_0x3dce9d(0x2b7,'(AWv'),_0x19442f),showToast(_0x3dce9d(0x2d2,'QBp@'),_0x3dce9d(0x209,'vWnO'));}}

function openAddProductModal(){const _0x10b24c=a0_0x31a6c7;currentEditingProductId=null,document[_0x10b24c(0x1ff,'1@1K')](_0x10b24c(0x4d8,'vm1N'))[_0x10b24c(0x508,'uvCh')]=_0x10b24c(0x588,'*gvl'),document[_0x10b24c(0x3fd,'ITel')](_0x10b24c(0x49e,'kTjX'))[_0x10b24c(0x333,'vWnO')]='',document[_0x10b24c(0x234,'y6kQ')](_0x10b24c(0x520,'Ba0E'))[_0x10b24c(0x4a7,'3QCz')]='',document[_0x10b24c(0x426,'se(l')](_0x10b24c(0x298,'Uuf%'))[_0x10b24c(0x52e,'1@1K')]='',document[_0x10b24c(0x386,'r%#7')](_0x10b24c(0x44c,'r%#7'))[_0x10b24c(0x5bd,'y6kQ')]='',document[_0x10b24c(0x415,'$l%E')](_0x10b24c(0x204,'f(x@'))[_0x10b24c(0x4a7,'3QCz')]='',document[_0x10b24c(0x324,'Uuf%')](_0x10b24c(0x406,'sFPI'))[_0x10b24c(0x50e,'vK0F')]='',document[_0x10b24c(0x3dc,'AoJo')](_0x10b24c(0x26e,'vm1N'))[_0x10b24c(0x41f,'LXbE')]=![],document[_0x10b24c(0x266,'H9II')](_0x10b24c(0x5a9,'mo(z'))[_0x10b24c(0x3bb,'Uuf%')]=![],document[_0x10b24c(0x4fc,'tN$n')](_0x10b24c(0x55e,'!$!F'))[_0x10b24c(0x4a3,'T8@N')]=![],document[_0x10b24c(0x5bb,'U^FL')](_0x10b24c(0x3d7,'zKbH'))[_0x10b24c(0x319,'Vobq')]=!![],removeProductImagePreview(),document[_0x10b24c(0x560,'C2RS')](_0x10b24c(0x4c8,'C2RS'))[_0x10b24c(0x1e5,'eLE@')][_0x10b24c(0x561,'R9v&')](_0x10b24c(0x3b0,'kTjX'));}

function removeProductImagePreview(){const _0x4a4026=a0_0x31a6c7,_0x182d41=document[_0x4a4026(0x5f6,'wQB5')](_0x4a4026(0x2c6,'#&bj'));if(_0x182d41)_0x182d41[_0x4a4026(0x5d2,'tN$n')]='';document[_0x4a4026(0x23d,'vWnO')](_0x4a4026(0x2df,'wQB5'))[_0x4a4026(0x55c,'kTjX')]='',document[_0x4a4026(0x234,'y6kQ')](_0x4a4026(0x408,'7Ggg'))[_0x4a4026(0x61a,'j1&b')][_0x4a4026(0x527,'*gvl')]=_0x4a4026(0x39f,'r%#7'),document[_0x4a4026(0x3dc,'AoJo')](_0x4a4026(0x3ad,'Uuf%'))[_0x4a4026(0x565,'T8@N')]='',document[_0x4a4026(0x259,'ovTd')](_0x4a4026(0x20a,'%Sp#'))[_0x4a4026(0x4fd,'(AWv')][_0x4a4026(0x318,'U^FL')]=_0x4a4026(0x61b,'1d#c'),document[_0x4a4026(0x27c,'WV#M')](_0x4a4026(0x4c5,'ITel'))[_0x4a4026(0x252,'Uuf%')][_0x4a4026(0x33f,'vYTh')](_0x4a4026(0x34e,'wQB5')),document[_0x4a4026(0x234,'y6kQ')](_0x4a4026(0x2d1,'kTjX'))[_0x4a4026(0x3cc,'AoJo')][_0x4a4026(0x5e4,'3%o!')]=_0x4a4026(0x3b5,'XvgR');}

function handleProductImageUpload(_0x49f907){const _0x5270f3=a0_0x31a6c7;if(_0x49f907[_0x5270f3(0x396,'9dA7')]&&_0x49f907[_0x5270f3(0x46a,'uvCh')][0x0]){const _0x1eb4fd=_0x49f907[_0x5270f3(0x620,'T8@N')][0x0];if(!_0x1eb4fd[_0x5270f3(0x2ef,'AoJo')][_0x5270f3(0x35b,'f(x@')](_0x5270f3(0x34a,'r%#7'))){alert(_0x5270f3(0x5d0,'vm1N'));return;}if(_0x1eb4fd[_0x5270f3(0x452,'!$!F')]>0x5*0x400*0x400){alert(_0x5270f3(0x246,'AoJo'));return;}const _0x202d03=document[_0x5270f3(0x5d6,'R9v&')](_0x5270f3(0x56c,'ITel')),_0x2a265a=document[_0x5270f3(0x442,'j1&b')](_0x5270f3(0x4af,'vK0F')),_0x2cb8d0=document[_0x5270f3(0x259,'ovTd')](_0x5270f3(0x553,'v$!6')),_0x3ebdd2=document[_0x5270f3(0x3f8,'T8@N')](_0x5270f3(0x295,'C2RS')),_0x255879=document[_0x5270f3(0x344,'Vobq')](_0x5270f3(0x4dd,'7Ggg')),_0x25f1c8=document[_0x5270f3(0x4d3,'zKbH')](_0x5270f3(0x37e,'C2RS')),_0x3fdd17=document[_0x5270f3(0x3ed,'a1a%')](_0x5270f3(0x26d,'U^FL'));if(_0x2a265a)_0x2a265a[_0x5270f3(0x2b9,'vWnO')][_0x5270f3(0x537,'(AWv')]=_0x5270f3(0x22e,'WV#M');if(_0x202d03)_0x202d03[_0x5270f3(0x491,'se(l')]=URL[_0x5270f3(0x5a3,'vYTh')](_0x1eb4fd);document[_0x5270f3(0x3ed,'a1a%')](_0x5270f3(0x5c7,'tN$n'))[_0x5270f3(0x41c,'XvgR')][_0x5270f3(0x45f,'$l%E')]=_0x5270f3(0x1f6,'kTjX'),document[_0x5270f3(0x5ec,'#&bj')](_0x5270f3(0x30f,'se(l'))[_0x5270f3(0x5e2,'uvCh')][_0x5270f3(0x352,'9dA7')](_0x5270f3(0x42a,'uvCh'));if(_0x2cb8d0)_0x2cb8d0[_0x5270f3(0x614,'3%o!')][_0x5270f3(0x537,'(AWv')]=_0x5270f3(0x543,'vL9(');if(_0x25f1c8)_0x25f1c8[_0x5270f3(0x554,'ovTd')]=_0x5270f3(0x2a7,'j1&b');isUploading=!![];if(_0x3fdd17)_0x3fdd17[_0x5270f3(0x2dc,'U^FL')]=!![];try{const _0x2252ec=Date[_0x5270f3(0x287,'uvCh')](),_0x3a325b=_0x5270f3(0x2b1,'(AWv')+_0x2252ec+'_'+_0x1eb4fd[_0x5270f3(0x623,'Ba0E')][_0x5270f3(0x21e,'vm1N')](/[^a-zA-Z0-9.]/g,'_'),_0x448e82=window[_0x5270f3(0x599,'mo(z')][_0x5270f3(0x410,'AoJo')](adminStorage,_0x3a325b),_0x7f8b6c={'contentType':_0x1eb4fd[_0x5270f3(0x42c,'C2RS')],'cacheControl':_0x5270f3(0x559,'eLE@')};await window[_0x5270f3(0x50d,'tN$n')][_0x5270f3(0x36c,'#&bj')](_0x448e82,_0x1eb4fd,_0x7f8b6c);const _0x482249=await window[_0x5270f3(0x4b5,'ITel')][_0x5270f3(0x425,'Uuf%')](_0x448e82);document[_0x5270f3(0x426,'se(l')](_0x5270f3(0x339,'ovTd'))[_0x5270f3(0x373,'#&bj')]=_0x482249;if(_0x25f1c8)_0x25f1c8[_0x5270f3(0x4c0,'mo(z')]=_0x5270f3(0x608,'vK0F');if(_0x3ebdd2)_0x3ebdd2[_0x5270f3(0x48b,'kTjX')][_0x5270f3(0x3b2,'WK1M')]=_0x5270f3(0x480,'se(l');if(_0x255879)_0x255879[_0x5270f3(0x2d9,'wQB5')]=_0x5270f3(0x337,'*gvl');showToast(_0x5270f3(0x579,'r%#7'),_0x5270f3(0x323,'a1a%')),isUploading=![];if(_0x3fdd17)_0x3fdd17[_0x5270f3(0x5b2,'Ba0E')]=![];setTimeout(()=>{const _0x507554=_0x5270f3;if(_0x2cb8d0)_0x2cb8d0[_0x507554(0x308,'wQB5')][_0x507554(0x487,'zKbH')]=_0x507554(0x5ce,'vK0F');},0x7d0);}catch(_0x4a62f0){console[_0x5270f3(0x2a8,'WK1M')](_0x5270f3(0x5e7,'QBp@'),_0x4a62f0),showToast(_0x5270f3(0x609,'vK0F')+_0x4a62f0[_0x5270f3(0x5a5,'H9II')],_0x5270f3(0x32b,'9dA7')),isUploading=![];if(_0x3fdd17)_0x3fdd17[_0x5270f3(0x5e3,'kTjX')]=![];if(_0x25f1c8)_0x25f1c8[_0x5270f3(0x432,'Uuf%')]=_0x5270f3(0x613,'r%#7');}}}

function saveProduct(){const _0x1b491e=a0_0x31a6c7;if(isUploading){showToast(_0x1b491e(0x597,'!$!F'),_0x1b491e(0x436,'y6kQ'));return;}try{const _0x271ea5=document[_0x1b491e(0x27c,'WV#M')](_0x1b491e(0x394,'LXbE'))[_0x1b491e(0x50e,'vK0F')][_0x1b491e(0x413,'XvgR')](),_0x2fd546=parseFloat(document[_0x1b491e(0x442,'j1&b')](_0x1b491e(0x4d4,'v$!6'))[_0x1b491e(0x503,'a1a%')])||0x0,_0x277e3e=document[_0x1b491e(0x415,'$l%E')](_0x1b491e(0x29c,'vWnO'))[_0x1b491e(0x4d7,'(AWv')],_0x3b9ae4=parseInt(document[_0x1b491e(0x4fc,'tN$n')](_0x1b491e(0x59a,'f(x@'))[_0x1b491e(0x58f,'eLE@')])||0x0,_0x52c0ec=document[_0x1b491e(0x417,'1d#c')](_0x1b491e(0x362,'wQB5'))[_0x1b491e(0x4d7,'(AWv')][_0x1b491e(0x5d1,'v$!6')](),_0x2076e6=document[_0x1b491e(0x3c4,'kTjX')](_0x1b491e(0x1f7,'3%o!'))[_0x1b491e(0x29e,'j1&b')][_0x1b491e(0x1f2,'T8@N')]();if(!_0x271ea5){showToast(_0x1b491e(0x5a1,'R9v&'),_0x1b491e(0x326,'se(l'));return;}if(!_0x2fd546||_0x2fd546<=0x0){showToast(_0x1b491e(0x477,'kTjX'),_0x1b491e(0x5ea,'vm1N'));return;}if(!_0x277e3e){showToast(_0x1b491e(0x380,'!]!K'),_0x1b491e(0x3b6,'WV#M'));return;}if(!_0x2076e6){showToast(_0x1b491e(0x5d7,'WV#M'),_0x1b491e(0x379,'kTjX'));return;}const _0x25f835={'name':_0x271ea5,'price':_0x2fd546,'category':_0x277e3e,'stock':_0x3b9ae4,'description':_0x52c0ec,'image':_0x2076e6,'isNew':document[_0x1b491e(0x259,'ovTd')](_0x1b491e(0x4f3,'(AWv'))[_0x1b491e(0x224,'ITel')],'isSale':document[_0x1b491e(0x535,'3%o!')](_0x1b491e(0x576,'1@1K'))[_0x1b491e(0x319,'Vobq')],'isBest':document[_0x1b491e(0x535,'3%o!')](_0x1b491e(0x31b,'!]!K'))[_0x1b491e(0x567,'WV#M')],'isActive':document[_0x1b491e(0x2e0,'WK1M')](_0x1b491e(0x363,'vWnO'))[_0x1b491e(0x4b3,'WK1M')],'updatedAt':window[_0x1b491e(0x577,'zKbH')][_0x1b491e(0x265,'C2RS')]()};showLoadingSpinner(_0x1b491e(0x591,'ovTd'));if(currentEditingProductId){const _0x501032=window[_0x1b491e(0x528,'AoJo')][_0x1b491e(0x24d,'sFPI')](adminDb,_0x1b491e(0x2c1,'v$!6'),currentEditingProductId);await window[_0x1b491e(0x619,'kTjX')][_0x1b491e(0x313,'(AWv')](_0x501032,_0x25f835),showToast(_0x1b491e(0x5b8,'j1&b'),_0x1b491e(0x3ea,'9dA7'));}else{_0x25f835[_0x1b491e(0x275,'Vobq')]=window[_0x1b491e(0x4a1,'WV#M')][_0x1b491e(0x3b4,'!]!K')]();const _0x2304f4=window[_0x1b491e(0x3d2,'uvCh')][_0x1b491e(0x4bb,'zKbH')](adminDb,_0x1b491e(0x3d5,'3%o!'));await window[_0x1b491e(0x50d,'tN$n')][_0x1b491e(0x2a0,'vL9(')](_0x2304f4,_0x25f835),showToast(_0x1b491e(0x278,'LoIP'),_0x1b491e(0x325,'vm1N'));}hideLoadingSpinner(),closeModal(),await loadAdminProducts(),await loadAdminStats();}catch(_0x4c3d76){console[_0x1b491e(0x5b7,'mo(z')](_0x1b491e(0x624,'a1a%'),_0x4c3d76),hideLoadingSpinner(),showToast(_0x1b491e(0x5e6,'!$!F')+_0x4c3d76[_0x1b491e(0x376,'QBp@')],_0x1b491e(0x399,'v$!6'));}}

function confirmDeleteProduct(_0x20f7a6){const _0x3c5c07=a0_0x31a6c7;productToDelete=_0x20f7a6;const _0x5a558c=document[_0x3c5c07(0x259,'ovTd')](_0x3c5c07(0x3cd,'AoJo'));_0x5a558c?(document[_0x3c5c07(0x522,'v$!6')](_0x3c5c07(0x2b4,'9dA7'))[_0x3c5c07(0x262,'vL9(')]=_0x3c5c07(0x60b,'vWnO'),document[_0x3c5c07(0x538,'XvgR')](_0x3c5c07(0x5de,'WK1M'))[_0x3c5c07(0x5fe,'r%#7')]=_0x3c5c07(0x216,'j1&b'),_0x5a558c[_0x3c5c07(0x24f,'R9v&')][_0x3c5c07(0x5e8,'ITel')](_0x3c5c07(0x33a,'!$!F'))):confirm(_0x3c5c07(0x59b,'!$!F'))&&deleteProductConfirmed();}

function deleteProductConfirmed(){const _0x384cb8=a0_0x31a6c7;if(!productToDelete)return;try{showLoadingSpinner(_0x384cb8(0x3de,'mo(z'));const _0xd10f6b=window[_0x384cb8(0x39b,'y6kQ')][_0x384cb8(0x494,'se(l')](adminDb,_0x384cb8(0x200,'9dA7'),productToDelete);await window[_0x384cb8(0x622,'7Ggg')][_0x384cb8(0x27d,'R9v&')](_0xd10f6b,{'isActive':![],'updatedAt':window[_0x384cb8(0x38b,'H9II')][_0x384cb8(0x390,'9dA7')]()}),hideLoadingSpinner(),closeModal(),showToast(_0x384cb8(0x2a3,'r%#7'),_0x384cb8(0x3e9,'U^FL')),await loadAdminProducts(),await loadAdminStats();}catch(_0x2a9c45){hideLoadingSpinner(),console[_0x384cb8(0x3a9,'3%o!')](_0x384cb8(0x30e,'1d#c'),_0x2a9c45),showToast(_0x384cb8(0x361,'vL9('),_0x384cb8(0x36a,'QBp@'));}}

